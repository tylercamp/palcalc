<adonisControls:AdonisWindow x:Class="PalCalc.UI.View.PassivesCheckListWindow"
                             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                             xmlns:local="clr-namespace:PalCalc.UI.View"
                             xmlns:vm="clr-namespace:PalCalc.UI.ViewModel"
                             xmlns:itl="clr-namespace:PalCalc.UI.Localization"
                             xmlns:adonisControls="clr-namespace:AdonisUI.Controls;assembly=AdonisUI"
                             xmlns:adonisExtensions="clr-namespace:AdonisUI.Extensions;assembly=AdonisUI"
                             xmlns:adonisUi="clr-namespace:AdonisUI;assembly=AdonisUI"
                             xmlns:util="clr-namespace:Wpf.Util"
                             xmlns:vu="clr-namespace:PalCalc.UI.View.Utils"
                             xmlns:mvm="clr-namespace:PalCalc.UI.ViewModel.Mapped"
                             xmlns:c="clr-namespace:PalCalc.UI.ViewModel.Converters"
                             mc:Ignorable="d"
                             d:DataContext="{x:Static vm:PassivesCheckListViewModel.DesignerInstance}"
                             IconVisibility="Collapsed"
                             WindowStyle="ToolWindow"
                             WindowStartupLocation="CenterOwner"
                             Title="{Binding Title.Value}"
                             Height="450" Width="700"
                             >
    <Grid>
        <Grid.Resources>
            <mvm:RankColorConverter x:Key="RCC" />
            <Style TargetType="ScrollBar" BasedOn="{StaticResource {x:Type ScrollBar}}">
                <Setter Property="adonisExtensions:ScrollBarExtension.ExpansionMode" Value="AlwaysExpand" />
            </Style>
        </Grid.Resources>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <ListView Grid.Row="0"
                  ItemsSource="{Binding AllEntries}"
                  adonisExtensions:GridViewSortExtension.AutoSort="False"
                  util:GridViewSort.AutoSort="True"
                  x:Name="m_ListView"
                  PreviewKeyDown="m_ListView_KeyDown"
                  >
            <ListView.ItemContainerStyle>
                <Style TargetType="ListViewItem" BasedOn="{StaticResource {x:Type ListViewItem}}">
                    <Setter Property="VerticalContentAlignment" Value="Center" />
                    <Setter Property="Padding" Value="2,3,0,3" />

                    <EventSetter Event="MouseDoubleClick" Handler="ListViewItem_MouseDoubleClick" />
                </Style>
            </ListView.ItemContainerStyle>
            <ListView.View>
                <GridView>
                    <GridView.Columns>
                        <GridViewColumn Header="{itl:LocalizedText Code=LC_PASSIVES_CHECKLIST_NAME}"
                                        util:GridViewSort.PropertyName="Passive.Name.Value"
                                        Width="150"
                                        >
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <Border CornerRadius="99"
                                                Padding="2"
                                                BorderThickness="0"
                                                Margin="0,0,4,0"
                                                VerticalAlignment="Center"
                                                >
                                            <Rectangle Width="15"
                                                       Height="15"
                                                       Fill="{Binding Passive.Rank, Converter={StaticResource RCC}}">
                                                <Rectangle.OpacityMask>
                                                    <ImageBrush ImageSource="{Binding Passive.RankIcon}" />
                                                </Rectangle.OpacityMask>
                                            </Rectangle>
                                        </Border>
                                        <TextBlock Text="{Binding Passive.Name.Value}" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                        <GridViewColumn Header="{itl:LocalizedText Code=LC_PASSIVES_CHECKLIST_DESCRIPTION}"
                                        DisplayMemberBinding="{Binding Passive.Description.Value}"
                                        util:GridViewSort.PropertyName="Passive.Description.Value"
                                        Width="200"
                                        />
                        <GridViewColumn Header="{itl:LocalizedText Code=LC_PASSIVES_CHECKLIST_COST}"
                                        DisplayMemberBinding="{Binding Passive.ModelObject.SurgeryCost}"
                                        util:GridViewSort.PropertyName="Passive.ModelObject.SurgeryCost"
                                        Width="100"
                                        />
                        <GridViewColumn Header="{itl:LocalizedText Code=LC_PASSIVES_CHECKLIST_SURGERY_ITEM}"
                                        DisplayMemberBinding="{Binding ItemRequiredLabel.Value}"
                                        util:GridViewSort.PropertyName="ItemRequiredLabel.Value"
                                        Width="100"
                                        />
                        <GridViewColumn util:GridViewSort.PropertyName="IsEnabled">
                            <GridViewColumn.Header>
                                <StackPanel Orientation="Horizontal">
                                    <CheckBox IsChecked="{Binding AllItemsEnabled}" Margin="4,1,5,0" />
                                    <TextBlock Text="{itl:LocalizedText LC_COMMON_ENABLED}" />
                                </StackPanel>
                            </GridViewColumn.Header>
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <CheckBox IsChecked="{Binding IsEnabled}" />
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                    </GridView.Columns>
                </GridView>
            </ListView.View>
        </ListView>

        <UniformGrid Grid.Row="1" Columns="2" HorizontalAlignment="Right" Margin="5">
            <Button
                Margin="2,0"
                Command="{Binding SaveCommand}"
                CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}"
                Content="{itl:LocalizedText LC_COMMON_SAVE}"
                />

            <Button
                Margin="2,0"
                MinWidth="60"
                Command="{Binding CancelCommand}"
                CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}"
                Content="{itl:LocalizedText LC_COMMON_CANCEL}"
                />
        </UniformGrid>
    </Grid>
</adonisControls:AdonisWindow>
